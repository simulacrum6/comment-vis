<mat-card class="content" *ngIf="(facetExists$ | async); else error">
  <div fxLayout="row" fxLayoutAlign="space-between">
    <mat-card-title-group>
      <mat-card-title>{{ facet$ | async }} - Details</mat-card-title>
      <mat-card-subtitle><app-breadcrumb [paths]="(breadCrumbPaths | async)"></app-breadcrumb></mat-card-subtitle>
    </mat-card-title-group>
    <div>
      <!-- TODO: activate, once implemented -->
      <a mat-button
        [routerLink]="previousDetailLink"
        matTooltip="go to previous detail view"
        [disabled]="true">
        <mat-icon>arrow_back</mat-icon>
      </a>
      <a mat-button
        [routerLink]="returnLink"
        [queryParams]="returnParams"
        matTooltip="close detail view"
        [disabled]="false">
        <mat-icon>close</mat-icon>
      </a>
    </div>
  </div>
  <mat-card-content>
    <div>
      The overall mood of the Dataset is <strong>{{ overallMood | async }}</strong> with <strong>{{ overallMoodPercent | async }}</strong>.<br>
      The mood of this {{ facetType$ | async }} {{ facet$ | async }} is <strong>{{ facetMood | async }}</strong> with <strong>{{ facetMoodPercent | async }}</strong>.
      This is <strong> {{ facetMoodEvaluation | async }}</strong>.

    </div>
    <div #topWrapper
      class="top_wrapper"
      fxLayout="row wrap"
      fxLayoutAlign="space-evenly">
      <app-pie [extractions]="extractions$ | async" [by]="subGroupType$ | async"></app-pie>
      <app-sentiment-table
        [extractions]="extractions$ | async"
        [facetType]="subGroupType$ | async">
      </app-sentiment-table>
    </div>
    <br>
    <div #infoWrapper>
      <mat-expansion-panel #commentPanel>
        <mat-expansion-panel-header>
          <mat-panel-title>Comments</mat-panel-title>
          <mat-panel-description>all comments related to {{ facetType$ | async }} {{ facet$ | async }}</mat-panel-description>
        </mat-expansion-panel-header>
        <app-comment-table [extractions]="extractions$ | async"></app-comment-table>
      </mat-expansion-panel>
      <mat-expansion-panel #groupPanel>
          <mat-expansion-panel-header>
            <mat-panel-title>Members</mat-panel-title>
            <mat-panel-description>all members of this {{ facetType$ | async }}'s group</mat-panel-description>
          </mat-expansion-panel-header>
          <app-sentiment-table
            [extractions]="extractions$ | async"
            [facetType]="facetType$ | async"
            [links]="false"
            facetProperty="text">
          </app-sentiment-table>
      </mat-expansion-panel>
    </div>
  </mat-card-content>
</mat-card>
<ng-template #error>
  <app-error message="The requested resource does not exist."></app-error>
</ng-template>
